---
import Logo from "@/components/icons/Logo.astro";
---

<section
    class="animate-fade-in animate-delay-250 relative bg-primary rounded-b-3xl flex items-center justify-between p-4 md:p-6"
>
    <!-- Logo mejorado -->
    <div class="p-1 md:p-2 flex items-center">
        <Logo
            class="w-32 h-10 md:w-40 md:h-12 lg:w-48 lg:h-14 transition-all duration-300"
        />
    </div>

    <!-- Botón de menú hamburguesa (solo móvil) -->
    <button
        id="mobile-menu-button"
        class="md:hidden flex flex-col justify-center items-center w-10 h-10 p-2 space-y-1.5 rounded text-silver-ligth hover:text-silver focus:outline-none"
        aria-label="Abrir menú"
    >
        <span
            class="block w-6 h-0.5 bg-current transition-transform duration-300"
        ></span>
        <span class="block w-6 h-0.5 bg-current transition-opacity duration-300"
        ></span>
        <span
            class="block w-6 h-0.5 bg-current transition-transform duration-300"
        ></span>
    </button>

    <!-- Navegación (escritorio) -->
    <nav
        class="hidden md:flex bg-white/10 justify-center items-center p-2 gap-6 lg:gap-8 border border-white/20 rounded-full backdrop-blur-md"
        aria-label="Navegación principal"
    >
        <a
            class="text-silver-ligth font-semibold hover:text-silver transition-colors duration-200 px-2 py-1"
            >Home</a
        >
        <a
            class="text-silver-ligth font-semibold hover:text-silver transition-colors duration-200 px-2 py-1"
            >Catalogo</a
        >
        <a
            class="text-silver-ligth font-semibold hover:text-silver transition-colors duration-200 px-2 py-1"
            >Blog</a
        >
        <a
            class="text-silver-ligth font-semibold hover:text-silver transition-colors duration-200 px-2 py-1"
            >Contacto</a
        >
    </nav>

    <!-- Menú móvil (oculto por defecto) -->
    <div
        id="mobile-menu"
        class="hidden absolute top-full left-0 right-0 bg-primary/95 border-t border-white/20 md:hidden z-50 rounded-b-2xl shadow-lg"
    >
        <div class="flex flex-col p-4 space-y-3">
            <a
                class="text-silver-ligth font-semibold hover:text-silver transition-colors duration-200 py-3 px-4 rounded-lg hover:bg-white/5"
                >Home</a
            >
            <a
                class="text-silver-ligth font-semibold hover:text-silver transition-colors duration-200 py-3 px-4 rounded-lg hover:bg-white/5"
                >Catalogo</a
            >
            <a
                class="text-silver-ligth font-semibold hover:text-silver transition-colors duration-200 py-3 px-4 rounded-lg hover:bg-white/5"
                >Blog</a
            >
            <a
                class="text-silver-ligth font-semibold hover:text-silver transition-colors duration-200 py-3 px-4 rounded-lg hover:bg-white/5"
                >Contacto</a
            >
        </div>
    </div>
</section>

<script>
    // Toggle del menú móvil
    document.addEventListener("DOMContentLoaded", () => {
        const menuButton = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");

        menuButton.addEventListener("click", (e) => {
            e.stopPropagation();
            mobileMenu.classList.toggle("hidden");

            // Animación del botón hamburguesa a X
            const spans = menuButton.querySelectorAll("span");
            if (!mobileMenu.classList.contains("hidden")) {
                spans[0].style.transform = "translateY(6px) rotate(45deg)";
                spans[1].style.opacity = "0";
                spans[2].style.transform = "translateY(-6px) rotate(-45deg)";
                menuButton.setAttribute("aria-label", "Cerrar menú");
            } else {
                spans[0].style.transform = "";
                spans[1].style.opacity = "";
                spans[2].style.transform = "";
                menuButton.setAttribute("aria-label", "Abrir menú");
            }
        });

        // Cerrar menú al hacer clic fuera de él
        document.addEventListener("click", (e) => {
            if (
                !menuButton.contains(e.target) &&
                !mobileMenu.contains(e.target) &&
                !mobileMenu.classList.contains("hidden")
            ) {
                mobileMenu.classList.add("hidden");
                const spans = menuButton.querySelectorAll("span");
                spans[0].style.transform = "";
                spans[1].style.opacity = "";
                spans[2].style.transform = "";
                menuButton.setAttribute("aria-label", "Abrir menú");
            }
        });

        // Prevenir que el menú se cierre al hacer clic dentro de él
        mobileMenu.addEventListener("click", (e) => {
            e.stopPropagation();
        });
    });
</script>

<style>
    /* Estilos para la animación del menú móvil */
    #mobile-menu {
        transition:
            opacity 0.3s ease,
            transform 0.3s ease;
    }

    #mobile-menu:not(.hidden) {
        animation: slideDown 0.3s ease forwards;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @media (max-width: 768px) {
        #mobile-menu {
            max-height: calc(100vh - 80px);
            overflow-y: auto;
        }
    }
</style>
