---
import Layout from "@/layouts/Layout.astro";
import blogs from "@/data/blog.json";
import Decoration from "@/components/Decoration.astro";
import CardBlog from "@/components/CardBlog.astro";

export async function getStaticPaths() {
    return blogs.map((b) => ({
        params: { id: b.id.toString() },
        props: { b },
    }));
}

const { b } = Astro.props;

if (!b) {
    return Astro.redirect("/404");
}

const blogsRelacionados = blogs
    .filter((blog) => blog.categoria === b.categoria && blog.id !== b.id)
    .slice(0, 4);
---

<Layout
    title={`${b.titulo} - Leandro y Mijail Joyería`}
    description={b.descripcion}
>
    <main class="min-h-screen bg-primary">
        <!-- Cabecera del Blog -->
        <section class="pb-16 pt-32 px-6">
            <div class="max-w-4xl mx-auto text-center">
                <h1
                    class="text-4xl lg:text-5xl font-bold text-gold-light text-shadow-gold-light leading-tight mb-6"
                >
                    {b.titulo}
                </h1>
                <div
                    class="flex flex-wrap justify-center items-center gap-6 text-gray-200 mb-8"
                >
                    <div class="flex items-center gap-2">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5 text-gold-light"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                            ></path>
                        </svg>
                        <span>{b.autor}</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5 text-gold-light"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                            ></path>
                        </svg>
                        <span>{b.fecha}</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5 text-gold-light"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
                            ></path>
                        </svg>
                        <span class="capitalize">{b.categoria}</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Imagen Destacada -->
        <section class="pb-16 px-6">
            <div class="max-w-5xl mx-auto">
                <div class="relative group">
                    <div
                        class="bg-gradient-to-br from-primary/20 to-primary/5 backdrop-blur-xl rounded-3xl border border-primary/20 overflow-hidden"
                    >
                        <img
                            src={b.imagen}
                            alt={b.titulo}
                            class="w-full h-auto max-h-[500px] object-cover group-hover:scale-105 transition-transform duration-700"
                        />
                        {
                            b.destacado && (
                                <div class="absolute top-6 left-6 bg-gold-light/90 backdrop-blur-sm text-primary px-4 py-2 rounded-full text-sm font-bold">
                                    ⭐ Destacado
                                </div>
                            )
                        }
                    </div>
                </div>
            </div>
        </section>

        <!-- Contenido del Blog -->
        <section class="pb-16 px-6">
            <div class="max-w-4xl mx-auto">
                <div class="prose prose-lg prose-invert max-w-none">
                    <p class="text-xl text-gray-200 leading-relaxed mb-8">
                        {b.descripcion}
                    </p>

                    <!-- Aquí iría el contenido completo del blog -->
                    <div class="text-gray-200 leading-relaxed space-y-6">
                        <!-- Este contenido normalmente vendría de una propiedad como b.contenido -->
                        <p>
                            Este es un ejemplo de contenido de blog. En una
                            implementación real, aquí se mostraría el contenido
                            completo de la publicación, que podría incluir
                            múltiples párrafos, imágenes, citas, y otros
                            elementos de formato.
                        </p>

                        <p>
                            Las joyas no son solo adornos; son expresiones de
                            arte, símbolos de amor y legados que perduran a
                            través del tiempo. En Leandro y Mijail Joyería, cada
                            pieza es creada con dedicación y atención al
                            detalle, asegurando que cada cliente reciba una obra
                            maestra que atesorará por siempre.
                        </p>

                        <h3
                            class="text-2xl font-semibold text-gold-light mt-10 mb-4"
                        >
                            El arte de la joyería fina
                        </h3>

                        <p>
                            Nuestro proceso de creación combina técnicas
                            tradicionales con tecnología moderna, resultando en
                            piezas que honran la herencia de la joyería mientras
                            incorporan diseños contemporáneos. Cada joya cuenta
                            una historia única, reflejando la personalidad y el
                            estilo de quien la lleva.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blogs Relacionados -->
        {
            blogsRelacionados.length > 0 && (
                <section class="py-20 px-6">
                    <div class="max-w-7xl mx-auto">
                        <div class="text-center mb-16">
                            <Decoration
                                title="Blogs Relacionados"
                                subtitle={
                                    "Otros Blogs de la categoría " + b.categoria
                                }
                            />
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 justify-center items-center">
                            {blogsRelacionados.map(
                                (blogsRelacionado, index) => (
                                    <div
                                        class="group"
                                        style={`animation-delay: ${index * 0.1}s`}
                                    >
                                        <CardBlog
                                            id={blogsRelacionado.id}
                                            titulo={blogsRelacionado.titulo}
                                            descripcion={
                                                blogsRelacionado.descripcion
                                            }
                                            autor={blogsRelacionado.autor}
                                            fecha={blogsRelacionado.fecha}
                                            categoria={
                                                blogsRelacionado.categoria
                                            }
                                            imagen={blogsRelacionado.imagen}
                                        />
                                    </div>
                                ),
                            )}
                        </div>
                    </div>
                </section>
            )
        }

        <!-- Call to Action -->
        <section class="pb-20 px-6">
            <div class="max-w-4xl mx-auto text-center">
                <div
                    class="bg-gradient-to-r from-primary/20 to-primary/10 backdrop-blur-xl rounded-3xl p-12 border border-primary/20"
                >
                    <Decoration
                        title="¿Te interesa nuestro contenido?"
                        subtitle="Mantente al día con las últimas tendencias en joyería y recibe consejos exclusivos."
                    />

                    <div
                        class="flex flex-col sm:flex-row gap-4 justify-center mt-8"
                    >
                        <a
                            href="/Blog"
                            class="group relative inline-flex items-center justify-center gap-3
                                   px-8 py-4 bg-gradient-to-r from-gold to-gold-light
                                   text-primary font-semibold text-lg rounded-xl
                                   shadow-lg shadow-gold/30
                                   hover:shadow-xl hover:shadow-gold/50
                                   hover:scale-105 hover:-translate-y-1
                                   transition-all duration-300
                                   focus:outline-none focus:ring-2 focus:ring-gold/50 focus:ring-offset-2
                                   active:scale-100 active:translate-y-0
                                   overflow-hidden min-w-[200px]"
                        >
                            <span>Volver al Blog</span>
                            <div
                                class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/25 to-white/0
                                       translate-x-[-100%] transition-transform duration-700
                                       group-hover:translate-x-[100%]"
                            >
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>
</Layout>

<style>
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Animaciones para productos relacionados */
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .group {
        animation: slideUp 0.6s ease-out both;
    }

    /* Efectos de hover mejorados */
    .group:hover .line-clamp-2 {
        -webkit-line-clamp: unset;
    }

    /* Estilos para el contenido del blog */
    .prose.invert {
        --tw-prose-body: #e5e7eb;
        --tw-prose-headings: #f9d67d;
        --tw-prose-lead: #d1d5db;
        --tw-prose-links: #f9d67d;
        --tw-prose-bold: #f9fafb;
        --tw-prose-counters: #9ca3af;
        --tw-prose-bullets: #4b5563;
        --tw-prose-hr: #374151;
        --tw-prose-quotes: #f3f4f6;
        --tw-prose-quote-borders: #374151;
        --tw-prose-captions: #9ca3af;
        --tw-prose-code: #f9fafb;
        --tw-prose-pre-code: #d1d5db;
        --tw-prose-pre-bg: #1f2937;
        --tw-prose-th-borders: #374151;
        --tw-prose-td-borders: #374151;
    }
</style>
